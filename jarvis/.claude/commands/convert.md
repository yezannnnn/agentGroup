# /convert - 文档结构化转换

将原始文档转换为AI友好的结构化格式，同时提取业务词典

## 使用方式

```
/convert [文档路径或内容]
/convert prd [文档]     # 转为PRD格式
/convert ui [文档]      # 转为UI格式
/convert api [文档]     # 转为API格式
```

## 输出内容

### 1. 结构化文档（主体）
按对应模板格式输出

### 2. 业务词典（自动提取）
从文档中提取业务术语及其含义

## 业务词典提取规则

### 提取来源
1. **名词解释章节** - 最准确，优先提取
2. **首次出现的专有名词** - 带引号或加粗的术语
3. **缩写和全称** - 如 "DMS（经销商管理系统）"
4. **状态/等级定义** - 如 "H级线索表示低意向"
5. **业务实体** - 如 "一网"、"二网"、"吉行驿"

### 提取格式
```markdown
## 业务词典

| 术语 | 含义 | 来源 |
|------|------|------|
| 吉行驿 | 支持全品牌共同经营的二网模式 | 名词解释 |
| 二网 | 二级经销商网络，归属于一网 | 名词解释 |
| 一网 | 一级经销商（主网） | 上下文推断 |
| H级线索 | 低意向潜客 | 4.5章节 |
```

### 置信度标记
- ✅ 文档明确定义
- ⚠️ 上下文推断（需人工确认）
- ❓ 不确定（需人工补充）

## 执行步骤

### 1. 识别文档类型
根据内容自动判断或使用用户指定的类型

### 2. 提取业务词典
```
扫描文档
    ↓
找"名词解释"章节 → 直接提取
    ↓
找专有名词（加粗/引号/首次定义）→ 提取术语+上下文
    ↓
找缩写说明 → 提取全称
    ↓
找状态/等级定义 → 提取含义
    ↓
生成业务词典表格
```

### 3. 结构化转换
按模板转换主体内容（删冗余、提要点、图转文）

### 4. 输出结果
```markdown
# [文档标题]

## META
...

## 业务词典
| 术语 | 含义 | 置信度 | 来源 |
|------|------|--------|------|
| xxx | xxx | ✅ | 名词解释 |
| xxx | xxx | ⚠️ | 上下文推断 |

---

[结构化的主体内容]

---

## AI开发指引
> 开发此PRD功能时注意：
> 1. 先理解上述业务词典中的术语
> 2. 术语在代码中保持一致命名
```

## 示例

**输入**: G助手3.3.16-吉行驿支持.pdf

**输出**:
```markdown
# PRD: G助手3.3.16

## META
名称: G助手3.3.16-吉行驿支持
...

## 业务词典

| 术语 | 含义 | 置信度 | 来源 |
|------|------|--------|------|
| 吉行驿 | 支持全品牌共同经营的全新销售模式二网，可与多个一网(4-5家)绑定授权 | ✅ | 名词解释 |
| 普通二网 | 原正常二网，只归属于一家一网，授权仅来源于归属一网 | ✅ | 名词解释 |
| 一网 | 一级经销商网络 | ⚠️ | 上下文推断 |
| 二网 | 二级经销商网络 | ⚠️ | 上下文推断 |
| DMS | 经销商管理系统，提供授权数据接口 | ⚠️ | 5.DMS相关改造 |

---

[PRD主体内容]
```

## 存储位置

转换后的文档存储到：
```
../shared/docs/[文档名].md
```

业务词典作为文档的一部分，不单独存储。
